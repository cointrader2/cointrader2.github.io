手机问题，思路和解法

mysql + innodb 的磁盘空间裁剪问题

探索磁盘空间是如何被浪费的 然后想办法减少浪费

automl + 多塔 来融合多方面异构数据，来输出ctr预测

就是磁层用相同的基底来融合所有易购数据，在输出端用多塔输出，不同的领域预测训练目标

从搜索和用户行为来判断购物意图，进而决定是否展示价格

假如有搜索和收藏行为表示购物意图强烈然后流量分流之后再展示价格

一方面可以是流量更加精纯，而且可以获得更多的训练集，并提高模型性能

流量分流，如果搜索词对象item有购物的可能性再进一步判断用户有没有购买意图

没有购买可能性的东西就不判断购买意图就用原来的搜索架构

分流之后的再进意图判断，减少模型并发压力

生产级pyspark架构

把jupyter跟pyspark分离。原来是都是运行在同一个节点的pod里，共享资源

现在加了一个livy和jupyterhub，用livy来调度jpt和pyspark，把脚本发到分布式pspk上去运行，返回结果到本机

加了一层资源调度，底层还是k8s

总结：架构优化和指标优化

模型架构系统架构

不直接优化ctr，而是用户参与度，可以更加人性化的广告系统和点击行为和转化率

不然就直接黄赌毒就行了

Experiment Idea Review

自下而上的大量产生高质量想法然后做实验

就是制度化结构化的而提出想法和做实验的结构

写实验预想文档

然后优先级排序，之后执行实验

运行一年效果非常好，曾航团队的成员也增长了。实验和效果影响力也增长了。 

近实时实验平台

用flink每15分钟窗口更新一次数据

其他系统每5分钟生成一次日志csv

然后分别发送到分子和分母服务器完成日志解析一直到计数求和的过程

这样的架构可以近乎实时的看到结果，如果结果不好就赶紧停掉，免得掉业务指标，如果好也可以停掉

广告：扩展定位

区别于关键词和兴趣。扩展定位是依据搜索词和图像语义的相似性来展示广告

就是词嵌入和图像嵌入

更新测量值和优化目标

来得到更加舒适的广告和点击行为

也就是为什么点击

重新设计主页

1 简化cta表单和按钮，发现注册减少了但是留存（页面停留）提高哦了

2 新加入互动展示动画

对高度优化的产品更进一步优化需要

1 定义成功的优化，也就是优化的方向

2 多团队早期建议避免不必要的方向

3 有项目无序扩大的危险，要精确描述mvp需求并自己负责

就是最小可行产品

pin路径

用图像中出现过的子物件关联到其他自物件的图

但是又什么用？发现引擎。让用户能发现自己想要找到的东西，提高练习和购买意愿

相当于是建立图像之间的语义链接，生成一个广义的更大的图

从注释提取关键词作为描述图像的标签

画像一种

从注释中提取关键词。先生辰给一个关键词备选，然后用分类器来预测词跟图像的相关性。现在是用xgb

presto，多源sql查询入口。后面可以用多重不同的数据库来完同一个查询

如何处理随机试验的短期偏见

短期客群分布对长期的便宜。解法就是延长实验运行时间

pixie推荐系统

一个图数据库，推荐用的是图嵌入的思路，但是要走10w步，使用剪枝压缩到1000步，然后推荐

pinsage，随机行走图卷积网络，提高了30%的用户参与度

通过上下文来捕捉语义相似，消除单纯的像素相似

肤色搜索

更加包容的搜索

那就是对肤色进行表示并与搜索词对应

把查询转化，映射到肤色范围

解决冷启动问题

用参与度作为测量指标来构建训练集

每隔n隔旧的pin插入一个新的pin，来搜集点击数据

然后训练模型

就是dtr预测。有数据之后就对新的做预测，然后插入对应排位的位置，以提高新鲜度

激活问题：探索有效用户信号

在注册页面加入性别选项

结果是提高了注册率，但是用google的用户下降了30%。why

原因猜测，可能是使用google账户登录之后希望直接进入产品页面，而不是注册页面，所以因为加了一个额性别页面，导致跳出率大幅提升

优化查询

候选生成，查询理解， 排序

问题：如何做归因分析

那就是假设是什么原因，然后开始做实验 。 把流量人群分成两组，一个有这个因素一个额没有这个因素，都给与相同的页面，测试表现。都一样。

pinqueue

人工内容审查平台

架构是flask + reactjs

why，都是操作页面元素，于是也用操作页面元素的方式

为了解决更大规模工程和运营挑战

通用搜索

对每个查询，先决定是进哪一个垂直搜索，就是一个搜索意图预测。也是混合组件的搜索前功能。

然后进查询计划组件，返回垂直查询结构。还有一个功能就是生成混合的垂直结构做训练集。

混合组件把所有垂直结果混合到主搜索结果中

pin2interest

把凸显光影社到兴趣

架构是候选生成和排序，不就是分类预测吗

每天跑批。200b的数据

pintext多任务词嵌入

纳入更多语义

并且为下游更多任务服务而不是原位无监督的w2v那种

是有监督的

相当于是从业务触发的自己的领域词向量

文本和视觉融合分类器

把垂直领域图像映射到16个标签词描述词属性词

pin2attribute

输入就是16个onehot+图像拍平向量，进一个全拦截层，进输出softmax层。

可扩展缓存层

用memcached集群做缓存内存缓存，吸收流量压力

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/63dafff6-df56-42ec-842d-f1cb19d3c1d4/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/63dafff6-df56-42ec-842d-f1cb19d3c1d4/Untitled.png)

kafka 分布式流处理日志传输中间件

可扩展实时数据统计管道平台。中间是卡夫卡

实时分布式聚合。时间蹿口是1h和1d

thrift微服务重构。是一个代码生成的中间件。可以跨语言生成代码

实时统计系统，用在广告实时竞价系统上

api分析。就是后端服务运行性能分析

cpu占用，api调用。分析脚本和被分析脚本同事运行收集数据

kafka集群运营

Apache Kafka是一个事件流平台，用于大规模收集，处理，存储和集成数据

 singer日志系统。运行在k8s上

web滚动部署和流量分配

0.5给金丝雀 99.5 给旧版本

没有问题再切换。如此往复。

pinlater。异步作业集成系统。拼命造轮子。有轮子就有影响力

代码部署系统

knox，密钥管理系统

pyspark做归因转化分析

[就是是加上的顺序的成对的操作，在窗口大小之内的成对](https://www.notion.so/c4398083971047f891a5d5fa1e55f3e7)